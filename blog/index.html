
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>ezrasuki</title>
	<meta name="author" content="Ezrasuki">

	
	<meta name="description" content="What is an Opaque type? a type that wraps lower-level types
used when the underlying implementation is complex
the user does not need to know about &hellip;">
	

	<link href="/atom.xml" rel="alternate" title="ezrasuki" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
	

	
</head>

<body>
	<header id="header" class="inner"><nav><h1><a href = "/">ezrasuki</a></h1>
<!--
<ul>
  <li><a href="/">Home</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>
-->
</nav>
</header>
	<div id="content" class="inner">


    <article class="post"><header>
  
  <h1 class="title"><a href="/blog/2013/09/08/opaque-types-in-objective-c/">Opaque Types in Objective-c</a></h1>
  
  








	
		<time datetime="2013-09-08T18:05:00-04:00">
			<span class="day"> 8</span><span class="month">Sep</span>
		</time>
	

</header>
<div class="entry-content">
  
    <h1>What is an Opaque type?</h1>

<ul>
<li>a type that wraps lower-level types</li>
<li>used when

<ul>
<li>the underlying implementation is complex</li>
<li>the user does not need to know about the inner workings.</li>
</ul>
</li>
<li>The individual fields of an object based on an opaque type are hidden from clients, but the type’s functions offer access to most values of these fields</li>
</ul>


<h1>A. Opaque types in Core Foundation</h1>

<p>Core foundation has many &ldquo;opaque types&#8217;.</p>

<h2>What is Core Foundation?</h2>

<p>Core Foundation is a library with a set of programming interfaces conceptually derived from the Objective-C-based Foundation framework but implemented in the C language.</p>

<h3>1. Makes it possible for the different frameworks and libraries on OS X to share code and data.</h3>

<p>Applications, libraries, and frameworks can define C routines that incorporate Core Foundation types in their external interfaces; they can thus communicate data—as Core Foundation objects—to each other through these interfaces.</p>

<h3>2. Makes some degree of operating-system independence possible</h3>

<p>Some Core Foundation types and functions are abstractions of things that have specific implementations on different operating systems.</p>

<h3>3. Supports internationalization with Unicode strings</h3>

<p>Uses CFString, instances of which represent an array of 16-bit Unicode characters. Flexible enough to hold megabytes worth of characters and yet simple and low-level enough for use in all programming interfaces communicating character data</p>

<h2>Opaque type examples in Core Foundation</h2>

<ul>
<li>CFString: an opaque type that &ldquo;represents&rdquo; and operates on Unicode character arrays.</li>
<li>CFArray: an opaque type for indexed-based collection functionality.</li>
</ul>


<h1>B. Opaque types in Quartz2D</h1>

<ul>
<li>CGPathRef: vector graphics</li>
<li>CGImageRef: bitmap images</li>
<li>CGLayerRef: drawling layer that can be used for repeated drawing and offscreen drawing</li>
<li>CGPatternRef: repeated drawing using patterns</li>
<li>CGShadingRef: for gradients</li>
<li>CGGradientRef: for gradients</li>
<li>CGColorRef: used for colors in Quartz2D</li>
<li>CGImageSourceRef: move data into and out of Quartz</li>
<li>CGFontRef: to draw text</li>
</ul>


  
  
  <footer class="meta">
    



	<div class="tags"><a class='category' href='/blog/categories/ios/'>iOS</a></div>

    
  </footer>
  
</div>
</article>


    <article class="post"><header>
  
  <h1 class="title"><a href="/blog/2013/09/08/drawing-on-ios/">Drawing on iOS</a></h1>
  
  








	
		<time datetime="2013-09-08T15:20:00-04:00">
			<span class="day"> 8</span><span class="month">Sep</span>
		</time>
	

</header>
<div class="entry-content">
  
    <h1>Quartz2D:</h1>

<ul>
<li>Two dimensional graphics drawing engine that makes up the bulk of the UIKit <strong>Core Graphics</strong> Framework.</li>
<li>C based API</li>
<li>Typically used on UIView object</li>
<li>Features

<ul>
<li>path-based drawing</li>
<li>painting with transparency</li>
<li>shading, drawing shadows</li>
<li>transparency layers</li>
<li>color management</li>
<li>anti-aliased rendering</li>
<li>PDF document generation</li>
<li>PDF metadata access</li>
</ul>
</li>
<li>Works with other technologies like

<ul>
<li>Core Animation</li>
<li>OpenGL ES</li>
<li>UIKit</li>
</ul>
</li>
</ul>


<p>  ## How Quartz2D works
  &ndash; Painter&rsquo;s model:</p>

<pre><code>- each successive drawing operation applies a layer of "paint" to an output "canvas"
- the drawing can be modified by overlaying more paint
</code></pre>

<ul>
<li>The canvas can be:

<ul>
<li>PDF</li>
<li>Bitmap image</li>
<li>Printer</li>
</ul>
</li>
</ul>


<p>  ## Graphics context (the &ldquo;canvas&rdquo;)
  CGContextRef is the drawing destination. It can be: Window, Layer, Bitmap, PDF, Printer, etc.
  &ndash; No need to perform device-specific calculations. Quartz takes care of it.</p>

<pre><code>### Type of contexts
1. Bitmap graphics context: rectangular array (or raster) of pixels
2. PDF graphics context
  - PDF files, unlike bitmaps, may contain more than one page.
  - Drawing a page from a PDF file on a different device results in the image being optimized for the display characteristics of that device.
3. Window graphics context
4. Layer context: `CGLayerRef` is an offscreen drawing destination associated with another graphics context.
5. PostScript graphics context: for printing
</code></pre>

<p>  ## Graphics state</p>

<pre><code>### What is a Graphic state?
  - color
  - line width
  - current position
  - text font size 

### Graphics context maintains a stack of Graphic states
When context is created, the stack is empty. When i save a context, the current state is pushed to the stack
- `CGContextSaveGState` pushes the current context onto stack
- `CGContextRestoreGState` pops the stack to restore previous context
</code></pre>

<p>  ## Quartz2D Coordinate systems</p>

<pre><code>### How Quartz2D achieves Device independent representation
uses a separate coordinate system (`user space`), mapping it to the coordinate system of the output device (`device space`), using the current transformation matrix (CTM).
- CTM: affine transform matrix
  - maps points by applying translation (move), rotation (rotate), and scaling (resize) operations.
  - to draw a box 45 degrees rotated, rotate CTM first and then draw inside the box.

### (x,y) point representation

![Quartz2D coordinate system](https://developer.apple.com/library/ios/DOCUMENTATION/GraphicsImaging/Conceptual/drawingwithquartz2d/Art/quartz_coordinates.gif)

- Origin (0,0): bottom-left corner.    
  - This is different from some other drawing coordinate systems
    - UIView: top-left corner is (0,0)
      - to switch, apply a transform that translates the origin to the upper-left corner of the PDF context and scales the y-coordinate by -1.
      - However, if you use a UIImage object to wrap a CGImage object you create, no need to modify the CTM.

![Modifying the coordinate system](https://developer.apple.com/library/ios/DOCUMENTATION/GraphicsImaging/Conceptual/drawingwithquartz2d/Art/flipped_coordinates.jpg)
</code></pre>

  
  
  <footer class="meta">
    



	<div class="tags"><a class='category' href='/blog/categories/coregraphics/'>coregraphics</a><a class='category' href='/blog/categories/coreimage/'>coreimage</a><a class='category' href='/blog/categories/ios/'>iOS</a><a class='category' href='/blog/categories/quartz2d/'>quartz2d</a></div>

    
  </footer>
  
</div>
</article>


    <article class="post"><header>
  
  <h1 class="title"><a href="/blog/2013/09/08/cgimage-vs-ciimage-vs-uiimage/">CGImage vs. CIImage vs. UIImage</a></h1>
  
  








	
		<time datetime="2013-09-08T08:35:00-04:00">
			<span class="day"> 8</span><span class="month">Sep</span>
		</time>
	

</header>
<div class="entry-content">
  
    <h2>UIImage</h2>

<ul>
<li>From UIKit</li>
<li>a high level way of displaying image data.</li>
<li>Not mutable</li>
<li>Just displaying the image</li>
</ul>


<h2>CGImage</h2>

<ul>
<li>From Core Graphics</li>
<li>Can cut out areas of the image</li>
</ul>


  
  
  <footer class="meta">
    



	<div class="tags"><a class='category' href='/blog/categories/coregraphics/'>coregraphics</a><a class='category' href='/blog/categories/coreimage/'>coreimage</a><a class='category' href='/blog/categories/ios/'>iOS</a><a class='category' href='/blog/categories/learn/'>learn</a><a class='category' href='/blog/categories/uiimage/'>uiimage</a></div>

    
  </footer>
  
</div>
</article>


    <article class="post"><header>
  
  <h1 class="title"><a href="/blog/2013/09/08/avasset/">AVAsset</a></h1>
  
  








	
		<time datetime="2013-09-08T08:13:00-04:00">
			<span class="day"> 8</span><span class="month">Sep</span>
		</time>
	

</header>
<div class="entry-content">
  
    

  
  
  <footer class="meta">
    



    
  </footer>
  
</div>
</article>


    <article class="post"><header>
  
  <h1 class="title"><a href="/blog/2013/09/08/getting-started-with-octopress/">Getting Started With Octopress</a></h1>
  
  








	
		<time datetime="2013-09-08T06:28:00-04:00">
			<span class="day"> 8</span><span class="month">Sep</span>
		</time>
	

</header>
<div class="entry-content">
  
    <p><img src="/images/octopress.jpg" alt="" /></p>

<h1>A. Setting up</h1>

<h2>1. Clone Octopress to local machine</h2>

<p>Clone the original octopress repo with the name I want for my blog. Running this will create an &ldquo;ezrasuki.github.io&rdquo; folder.</p>

<pre><code>git clone git://github.com/imathis/octopress.git ezrasuki.github.io
</code></pre>

<h2>2. Install Octopress</h2>

<pre><code>bundle install
rake install
</code></pre>

<h2>3. Configure Octopress</h2>

<p>Open <code>_config.yml</code> and edit some attributes I want to change.</p>

<pre><code>url: ezrasuki.github.io
title: .ezra.suki.
subtitle: Adventure of Ezrasuki
author: Ezrasuki
simple_search: http://google.com/search
description:
</code></pre>

<h1>B. Writing a post locally</h1>

<p>From the blog root directory (In my case, the ezrasuki.github.io folder I created by cloning), run this task:</p>

<pre><code>rake new_post["Hello World"]
</code></pre>

<p>It will create a .markdown file under <code>source/_posts</code>, with a name that looks like: <code>2013-09-07-hello-world.markdown</code>. Open and edit so it looks something like this:</p>

<pre><code>---
layout: post
title: "Hello World"
date: 2013-09-07 23:18
comments: true
categories: [Test, Helloworld]
---

This is the content. You can write in markdown.
</code></pre>

<p>Note that &ldquo;categories&rdquo; are basically tags.</p>

<h1>C. Preview blog</h1>

<p>When done, generate HTML from the markdown with:</p>

<pre><code>rake generate
</code></pre>

<p>To preview the post locally, run the following command, which will start a <a href="http://localhost:4000">http://localhost:4000</a> server you can visit.</p>

<pre><code>rake preview
</code></pre>

<h1>C. Deploy to Github</h1>

<p>There are many options for hosting, but I am hosting it on Github because it&rsquo;s free.</p>

<h2>1. Create a Github repo</h2>

<p>Create a repo with the name of your blog. It should look like this: <code>[your github username].github.io</code>. Mine is <code>ezrasuki.github.io</code></p>

<h2>2. Connect Octopress with the Github repo</h2>

<p>Octopress has a rake command which automatically takes care of all this. Run:</p>

<pre><code>rake setup_github_pages
</code></pre>

<p>It will ask you the github repo url. Copy the clone URL from the Github repo and paste it here. It should look something like <code>https://github.com/ezrasuki/ezrasuki.github.io.git</code>.</p>

<h2>3. Deploy</h2>

<h3>A. Deploy generated blog files</h3>

<p>Finally, deploy all the local changes (including the new post) to Github pages repo by running:</p>

<pre><code>rake deploy
</code></pre>

<h3>B. Deploy source files</h3>

<p>This only deploys the master branch, which contains the generated blog content. You may also want to push the source branch. The source branch contains everything except for the generated blog files. This includes:
1. Octopress source code
2. Markdown files for posts</p>

<p>Therefore it is a good idea to commit these too, in order to keep track of this side as well. Run the following:</p>

<pre><code>git commit -am "Committing source"
git push origin source
</code></pre>

<p>Note that <code>git push origin master</code> has been already executed automatically when we ran <code>rake deploy</code> earlier. Again, that was for pushing the final static content. And this time, <code>git push origin source</code> is for pushing the source files.</p>

  
  
  <footer class="meta">
    



	<div class="tags"><a class='category' href='/blog/categories/learn/'>learn</a><a class='category' href='/blog/categories/octopress/'>octopress</a></div>

    
  </footer>
  
</div>
</article>


    <article class="post"><header>
  
  <h1 class="title"><a href="/blog/2013/09/08/avfoundation-overview/">AVFoundation Overview</a></h1>
  
  








	
		<time datetime="2013-09-08T00:13:00-04:00">
			<span class="day"> 8</span><span class="month">Sep</span>
		</time>
	

</header>
<div class="entry-content">
  
    <ol>
<li>AVAsset</li>
</ol>


  
  
  <footer class="meta">
    



	<div class="tags"><a class='category' href='/blog/categories/avfoundation/'>avfoundation</a><a class='category' href='/blog/categories/ios/'>iOS</a><a class='category' href='/blog/categories/learn/'>learn</a></div>

    
  </footer>
  
</div>
</article>


    <article class="post"><header>
  
  <h1 class="title"><a href="/blog/2013/09/07/core-image/">Core Image Basics</a></h1>
  
  








	
		<time datetime="2013-09-07T23:56:00-04:00">
			<span class="day"> 7</span><span class="month">Sep</span>
		</time>
	

</header>
<div class="entry-content">
  
    <p>Take a <strong>CIImage</strong> and apply <strong>CIFilter</strong> to draw on <strong>CIContext</strong></p>

<p>Example</p>

<pre><code>// 1. Create CIContext
CIContext *context = [CIContext contextWithOptions:nil];

// 2. Get a CIImage
CIImage *image = [CIImage imageWithContentsOfURL:myURL];

// 3. Create a CIFilter
CIFilter *filter = [CIFilter filterWithName:@"CISepiaTone"];

// 4. Apply the filter to the image
[filter setValue:image forKey:kCIInputImageKey];

// 5. More CIFilter customization
[filter setValue:[NSNumber numberWithFloat:0.8f] forKey:@"InputIntensity"];

// 6. Get the resulting image from CIFilter
CIImage *result = [filter valueForKey:kCIOutputImageKey];

// 7. Finally, render CIImage onto Core Graphics Image, which then can be displayed or saved.
CGImageRef cgImage = [context createCGImage:result fromRect:[result extent];
</code></pre>

  
  
  <footer class="meta">
    



	<div class="tags"><a class='category' href='/blog/categories/ios/'>iOS</a><a class='category' href='/blog/categories/learn/'>learn</a><a class='category' href='/blog/categories/note/'>note</a></div>

    
  </footer>
  
</div>
</article>


    <article class="post"><header>
  
  <h1 class="title"><a href="/blog/2013/09/07/hello-world/">Hello World</a></h1>
  
  








	
		<time datetime="2013-09-07T23:18:00-04:00">
			<span class="day"> 7</span><span class="month">Sep</span>
		</time>
	

</header>
<div class="entry-content">
  
    <h1>Hello World</h1>

<h2>Blockquote example</h2>

<p>This is an example of a blockquote.</p>

<blockquote><p>This is the first post
This is a <a href="http://google.com/" title="Title">link</a></p></blockquote>

<hr />

<h2>Image Example</h2>

<p><img src="http://www.socialyeti.com/wp-content/uploads/2012/12/Le-Bain-NYC-Pool.jpg" alt="image example placeholder" /></p>

<hr />

<h2>Code Example</h2>

<p>This is an example of a javascript code</p>

<pre><code>var sayHello = function(){
  for(var j = 0; j &lt; 100 ; j++){
      console.log("Hello World " + j);
  }
}
</code></pre>

  
  
  <footer class="meta">
    



	<div class="tags"><a class='category' href='/blog/categories/helloworld/'>Helloworld</a><a class='category' href='/blog/categories/test/'>Test</a></div>

    
  </footer>
  
</div>
</article>

<nav id="pagenavi">
    
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
	<footer id="footer" class="inner"><div class="social alignright">
	
	
	
	
	
	<a class="rss" href="/atom.xml" title="RSS">RSS</a>
</div>
<p>&copy; 2013 Ezrasuki</p>
<div class="clearfix"></div></footer>
	<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
	(function($){
		$('.entry-content').each(function(i){
			var _i = i;
			$(this).find('img').each(function(){
				var alt = $(this).attr('alt');

				if (alt == '' || typeof alt == 'undefined'){
					$(this).wrap('<a href="'+$(this).attr('src')+'" class="fancybox" rel="gallery'+_i+'" />');
				} else {
					$(this).after('<span class="caption">'+alt+'</span>').wrap('<a href="'+$(this).attr('src')+'" class="fancybox" title="'+alt+'" rel="gallery'+_i+'" />');
				}
			});
		});
		$('.fancybox').fancybox();
	})(jQuery);
</script>





</body>
</html>