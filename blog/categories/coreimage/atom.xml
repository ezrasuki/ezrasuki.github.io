<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: coreimage | ezrasuki]]></title>
  <link href="http://ezrasuki.github.io/blog/categories/coreimage/atom.xml" rel="self"/>
  <link href="http://ezrasuki.github.io/"/>
  <updated>2013-09-08T20:18:46-04:00</updated>
  <id>http://ezrasuki.github.io/</id>
  <author>
    <name><![CDATA[Ezrasuki]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Drawing on iOS]]></title>
    <link href="http://ezrasuki.github.io/blog/2013/09/08/drawing-on-ios/"/>
    <updated>2013-09-08T15:20:00-04:00</updated>
    <id>http://ezrasuki.github.io/blog/2013/09/08/drawing-on-ios</id>
    <content type="html"><![CDATA[<h1>Quartz2D:</h1>

<ul>
<li>Two dimensional graphics drawing engine that makes up the bulk of the UIKit <strong>Core Graphics</strong> Framework.</li>
<li>C based API</li>
<li>Typically used on UIView object</li>
<li>Features

<ul>
<li>path-based drawing</li>
<li>painting with transparency</li>
<li>shading, drawing shadows</li>
<li>transparency layers</li>
<li>color management</li>
<li>anti-aliased rendering</li>
<li>PDF document generation</li>
<li>PDF metadata access</li>
</ul>
</li>
<li>Works with other technologies like

<ul>
<li>Core Animation</li>
<li>OpenGL ES</li>
<li>UIKit</li>
</ul>
</li>
</ul>


<p>  ## How Quartz2D works
  &ndash; Painter&rsquo;s model:</p>

<pre><code>- each successive drawing operation applies a layer of "paint" to an output "canvas"
- the drawing can be modified by overlaying more paint
</code></pre>

<ul>
<li>The canvas can be:

<ul>
<li>PDF</li>
<li>Bitmap image</li>
<li>Printer</li>
</ul>
</li>
</ul>


<p>  ## Graphics context (the &ldquo;canvas&rdquo;)
  CGContextRef is the drawing destination. It can be: Window, Layer, Bitmap, PDF, Printer, etc.
  &ndash; No need to perform device-specific calculations. Quartz takes care of it.</p>

<pre><code>### Type of contexts
1. Bitmap graphics context: rectangular array (or raster) of pixels
2. PDF graphics context
  - PDF files, unlike bitmaps, may contain more than one page.
  - Drawing a page from a PDF file on a different device results in the image being optimized for the display characteristics of that device.
3. Window graphics context
4. Layer context: `CGLayerRef` is an offscreen drawing destination associated with another graphics context.
5. PostScript graphics context: for printing
</code></pre>

<p>  ## Graphics state</p>

<pre><code>### What is a Graphic state?
  - color
  - line width
  - current position
  - text font size 

### Graphics context maintains a stack of Graphic states
When context is created, the stack is empty. When i save a context, the current state is pushed to the stack
- `CGContextSaveGState` pushes the current context onto stack
- `CGContextRestoreGState` pops the stack to restore previous context
</code></pre>

<p>  ## Quartz2D Coordinate systems</p>

<pre><code>### How Quartz2D achieves Device independent representation
uses a separate coordinate system (`user space`), mapping it to the coordinate system of the output device (`device space`), using the current transformation matrix (CTM).
- CTM: affine transform matrix
  - maps points by applying translation (move), rotation (rotate), and scaling (resize) operations.
  - to draw a box 45 degrees rotated, rotate CTM first and then draw inside the box.

### (x,y) point representation

![Quartz2D coordinate system](https://developer.apple.com/library/ios/DOCUMENTATION/GraphicsImaging/Conceptual/drawingwithquartz2d/Art/quartz_coordinates.gif)

- Origin (0,0): bottom-left corner.    
  - This is different from some other drawing coordinate systems
    - UIView: top-left corner is (0,0)
      - to switch, apply a transform that translates the origin to the upper-left corner of the PDF context and scales the y-coordinate by -1.
      - However, if you use a UIImage object to wrap a CGImage object you create, no need to modify the CTM.

![Modifying the coordinate system](https://developer.apple.com/library/ios/DOCUMENTATION/GraphicsImaging/Conceptual/drawingwithquartz2d/Art/flipped_coordinates.jpg)
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[CGImage vs. CIImage vs. UIImage]]></title>
    <link href="http://ezrasuki.github.io/blog/2013/09/08/cgimage-vs-ciimage-vs-uiimage/"/>
    <updated>2013-09-08T08:35:00-04:00</updated>
    <id>http://ezrasuki.github.io/blog/2013/09/08/cgimage-vs-ciimage-vs-uiimage</id>
    <content type="html"><![CDATA[<h2>UIImage</h2>

<ul>
<li>From UIKit</li>
<li>a high level way of displaying image data.</li>
<li>Not mutable</li>
<li>Just displaying the image</li>
</ul>


<h2>CGImage</h2>

<ul>
<li>From Core Graphics</li>
<li>Can cut out areas of the image</li>
</ul>

]]></content>
  </entry>
  
</feed>
